# QA environment configuration
# Copy to server.env in your QA deploy directory

# Environment name (used for container naming: lehrerlog-qa-server, lehrerlog-qa-db)
ENV_NAME=qa

IMAGE_NAME=ghcr.io/your-username/lehrerlog-server
IMAGE_TAG=qa

# QA runs on port 18081 (different from production)
HOST_PORT=18081

# Garage (S3-compatible storage)
GARAGE_IMAGE=dxflrs/garage:v2.2.0
GARAGE_DIR=/var/lib/lehrerlog/qa/garage
GARAGE_CONFIG_PATH=/home/aaron/docker/lehrerlog-qa/garage/garage.toml
GARAGE_CONFIG_DIR=/home/aaron/docker/lehrerlog-qa/garage
GARAGE_API_PORT=3910
GARAGE_ADMIN_PORT=3913
GARAGE_ADMIN_TOKEN=change-me
GARAGE_METRICS_TOKEN=change-me
GARAGE_RPC_SECRET=change-me

# PostgreSQL settings - separate database from production
POSTGRES_DB=lehrerlog_qa
POSTGRES_USER=lehrerlog
POSTGRES_PASSWORD=qa-password-here

# Server settings (passed to the Ktor container)
SCHOOL_CATALOG_ENDPOINT=https://overpass-api.de/api/interpreter
# Optional object storage health endpoint (Garage admin /health)
OBJECT_STORAGE_HEALTH_URL=http://garage:3903/v2/GetClusterHealth
OBJECT_STORAGE_HEALTH_TOKEN=
# Object storage connection (Garage/S3)
OBJECT_STORAGE_ENDPOINT=http://garage:3900
OBJECT_STORAGE_REGION=garage
OBJECT_STORAGE_BUCKET=lehrerlog-qa
OBJECT_STORAGE_KEY_NAME=lehrerlog-qa-server
OBJECT_STORAGE_ACCESS_KEY=
OBJECT_STORAGE_SECRET_KEY=
OBJECT_STORAGE_PATH_STYLE=true

# Optional seed test user (recommended for QA verification)
# Use a very strong password and keep it out of VCS.
SEED_TEST_USER_EMAIL=
# Prefer the base64-encoded password to avoid env parsing issues.
SEED_TEST_USER_PASSWORD_B64=
SEED_TEST_USER_FIRST_NAME=QA
SEED_TEST_USER_LAST_NAME=Verifier
SEED_TEST_SCHOOL_CODE=QA-TEST
SEED_TEST_SCHOOL_NAME=QA Test School

# QA storage paths (completely separate from production!)
DATA_DIR=/var/lib/lehrerlog/qa/data
DB_DATA_DIR=/var/lib/lehrerlog/qa/pgdata

# Docker Compose environment variables
# Copy this file to server.env and adjust values for your environment

# Environment name (used for container naming and paths)
ENV_NAME=prod

# Container image settings
IMAGE_NAME=ghcr.io/your-username/lehrerlog-server
IMAGE_TAG=latest

# Server port (use different ports for prod/qa on same host)
HOST_PORT=18080

# Garage (S3-compatible storage)
GARAGE_IMAGE=dxflrs/garage:v2.2.0
GARAGE_DIR=/var/lib/lehrerlog/prod/garage
GARAGE_CONFIG_PATH=/home/aaron/docker/lehrerlog/garage/garage.toml
GARAGE_API_PORT=3900
GARAGE_ADMIN_PORT=3903
GARAGE_ADMIN_TOKEN=change-me
GARAGE_METRICS_TOKEN=change-me
GARAGE_RPC_SECRET=change-me

# PostgreSQL settings
POSTGRES_DB=lehrerlog
POSTGRES_USER=lehrerlog
POSTGRES_PASSWORD=change-me-to-secure-password

# Server settings (passed to the Ktor container)
SCHOOL_CATALOG_ENDPOINT=https://overpass-api.de/api/interpreter
# Optional object storage health endpoint (Garage admin API)
OBJECT_STORAGE_HEALTH_URL=http://garage:3903/v2/GetClusterHealth
# Optional bearer token for admin API health (defaults to GARAGE_ADMIN_TOKEN in deploy script)
OBJECT_STORAGE_HEALTH_TOKEN=
# Object storage connection (Garage/S3)
OBJECT_STORAGE_ENDPOINT=http://garage:3900
OBJECT_STORAGE_REGION=garage
OBJECT_STORAGE_BUCKET=lehrerlog-prod
OBJECT_STORAGE_KEY_NAME=lehrerlog-prod-server
OBJECT_STORAGE_ACCESS_KEY=
OBJECT_STORAGE_SECRET_KEY=
OBJECT_STORAGE_PATH_STYLE=true

# Optional seed test user (recommended for QA verification)
# Use a very strong password and keep it out of VCS.
SEED_TEST_USER_EMAIL=
# Prefer the base64-encoded password to avoid env parsing issues.
SEED_TEST_USER_PASSWORD_B64=
SEED_TEST_USER_FIRST_NAME=QA
SEED_TEST_USER_LAST_NAME=Verifier
SEED_TEST_SCHOOL_CODE=QA-TEST
SEED_TEST_SCHOOL_NAME=QA Test School

# Storage directories (use absolute paths for clarity)
# These should be different for QA vs production!
DATA_DIR=/var/lib/lehrerlog/prod/data
DB_DATA_DIR=/var/lib/lehrerlog/prod/pgdata
